!function(e){"use strict";function t(t,n,o){"addEventListener"in e?t.addEventListener(n,o,!1):"attachEvent"in e&&t.attachEvent("on"+n,o)}function n(t,n,o){"removeEventListener"in e?t.removeEventListener(n,o,!1):"detachEvent"in e&&t.detachEvent("on"+n,o)}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){return se+"["+de+"] "+e}function r(t){le&&"object"==typeof e.console&&console.log(i(t))}function a(t){"object"==typeof e.console&&console.warn(i(t))}function u(){c(),r("Initialising iFrame ("+location.href+")"),l(),d(),f("background",K),f("padding",G),I(),p(),y(),m(),k(),b(),ae=N(),q("init","Init message from host page"),ke()}function c(){function e(e){return"true"===e}var t=re.substr(fe).split(":");de=t[0],X=void 0!==t[1]?Number(t[1]):X,Q=void 0!==t[2]?e(t[2]):Q,le=void 0!==t[3]?e(t[3]):le,ue=void 0!==t[4]?Number(t[4]):ue,U=void 0!==t[6]?e(t[6]):U,Y=t[7],oe=void 0!==t[8]?t[8]:oe,K=t[9],G=t[10],ye=void 0!==t[11]?Number(t[11]):ye,ae.enable=void 0!==t[12]&&e(t[12]),ge=void 0!==t[13]?t[13]:ge,Me=void 0!==t[14]?t[14]:Me}function l(){"iFrameResizer"in e&&Object===e.iFrameResizer.constructor&&function(){var t=e.iFrameResizer;r("Reading data from page: "+JSON.stringify(t)),Ne="messageCallback"in t?t.messageCallback:Ne,ke="readyCallback"in t?t.readyCallback:ke,pe="targetOrigin"in t?t.targetOrigin:pe,oe="heightCalculationMethod"in t?t.heightCalculationMethod:oe,Me="widthCalculationMethod"in t?t.widthCalculationMethod:Me}(),r("TargetOrigin for parent set to: "+pe)}function s(e,t){return-1!==t.indexOf("-")&&(a("Negative CSS value ignored for "+e),t=""),t}function f(e,t){void 0!==t&&""!==t&&"null"!==t&&(document.body.style[e]=t,r("Body "+e+' set to "'+t+'"'))}function d(){void 0===Y&&(Y=X+"px"),f("margin",s("margin",Y))}function m(){document.documentElement.style.height="",document.body.style.height="",r('HTML & body height set to "auto"')}function g(i){function a(){q(i.eventName,i.eventType)}var u={add:function(n){t(e,n,a)},remove:function(t){n(e,t,a)}};i.eventNames&&Array.prototype.map?(i.eventName=i.eventNames[0],i.eventNames.map(u[i.method])):u[i.method](i.eventName),r(o(i.method)+" event listener: "+i.eventType)}function v(e){g({method:e,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),g({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),g({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),g({method:e,eventType:"Input",eventName:"input"}),g({method:e,eventType:"Mouse Up",eventName:"mouseup"}),g({method:e,eventType:"Mouse Down",eventName:"mousedown"}),g({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),g({method:e,eventType:"Touch Start",eventName:"touchstart"}),g({method:e,eventType:"Touch End",eventName:"touchend"}),g({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),g({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),g({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),g({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),g({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===ge&&g({method:e,eventType:"IFrame Resized",eventName:"resize"})}function h(e,t,n,o){return t!==e&&(e in n||(a(e+" is not a valid option for "+o+"CalculationMethod."),e=t),r(o+' calculation method set to "'+e+'"')),e}function p(){oe=h(oe,ne,Ae,"height")}function y(){Me=h(Me,Oe,xe,"width")}function b(){!0===U?(v("add"),A()):r("Auto Resize disabled")}function T(){r("Disable outgoing messages"),ve=!1}function E(){r("Remove event listener: Message"),n(e,"message",J)}function S(){null!==$&&$.disconnect()}function O(){v("remove"),S(),clearInterval(ce)}function M(){T(),E(),!0===U&&O()}function I(){var e=document.createElement("div");e.style.clear="both",e.style.display="block",document.body.appendChild(e)}function N(){function n(){return{x:void 0!==e.pageXOffset?e.pageXOffset:document.documentElement.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:document.documentElement.scrollTop}}function o(e){var t=e.getBoundingClientRect(),o=n();return{x:parseInt(t.left,10)+parseInt(o.x,10),y:parseInt(t.top,10)+parseInt(o.y,10)}}function i(e){var t=e.split("#")[1]||e,n=decodeURIComponent(t),i=document.getElementById(n)||document.getElementsByName(n)[0];void 0!==i?function(e){var n=o(e);r("Moving to in page link (#"+t+") at x: "+n.x+" y: "+n.y),V(n.y,n.x,"scrollToOffset")}(i):(r("In page link (#"+t+") not found in iFrame, so sending to parent"),V(0,0,"inPageLink","#"+t))}function u(){""!==location.hash&&"#"!==location.hash&&i(location.href)}function c(){function e(e){function n(e){e.preventDefault(),i(this.getAttribute("href"))}"#"!==e.getAttribute("href")&&t(e,"click",n)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),e)}function l(){t(e,"hashchange",u)}function s(){setTimeout(u,_)}return ae.enable?function(){Array.prototype.forEach&&document.querySelectorAll?(r("Setting up location.hash handlers"),c(),l(),s()):a("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}():r("In page linking not enabled"),{findTarget:i}}function k(){r("Enable public methods"),Ie.parentIFrame={autoResize:function(e){return!0===e&&!1===U?(U=!0,b()):!1===e&&!0===U&&(U=!1,O()),U},close:function(){V(0,0,"close"),M()},getId:function(){return de},getPageInfo:function(e){"function"==typeof e?(we=e,V(0,0,"pageInfo")):(we=e,V(0,0,"pageInfoStop"))},moveToAnchor:function(e){ae.findTarget(e)},reset:function(){B("parentIFrame.reset")},scrollTo:function(e,t){V(t,e,"scrollTo")},scrollToOffset:function(e,t){V(t,e,"scrollToOffset")},sendMessage:function(e,t){V(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){oe=e,p()},setWidthCalculationMethod:function(e){Me=e,y()},setTargetOrigin:function(e){r("Set targetOrigin: "+e),pe=e},size:function(e,t){q("size","parentIFrame.size("+(e||"")+(t?","+t:"")+")",e,t)}}}function w(){0!==ue&&(r("setInterval: "+ue+"ms"),ce=setInterval(function(){q("interval","setInterval: "+ue)},Math.abs(ue)))}function C(){function t(e){function t(e){!1===e.complete&&(r("Attach listeners to "+e.src),e.addEventListener("load",a,!1),e.addEventListener("error",u,!1),l.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function n(e){l.splice(l.indexOf(e),1)}function o(e){r("Remove listeners from "+e.src),e.removeEventListener("load",a,!1),e.removeEventListener("error",u,!1),n(e)}function i(e,t,n){o(e.target),q(t,n+": "+e.target.src,void 0,void 0)}function a(e){i(e,"imageLoad","Image loaded")}function u(e){i(e,"imageLoadFailed","Image load failed")}function c(e){q("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}var l=[],s=e.MutationObserver||e.WebKitMutationObserver,f=function(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return f=new s(c),r("Create body MutationObserver"),f.observe(e,t),f}();return{disconnect:function(){"disconnect"in f&&(r("Disconnect body MutationObserver"),f.disconnect(),l.forEach(o))}}}function A(){var t=0>ue;e.MutationObserver||e.WebKitMutationObserver?t?w():$=C():(r("MutationObserver not supported in this browser!"),w())}function x(e,t){var n=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(n=document.defaultView.getComputedStyle(t,null),n=null!==n?n[e]:0):n=function(e){if(/^\d+(px)?$/i.test(e))return parseInt(e,j);var n=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=n,t.runtimeStyle.left=o,e}(t.currentStyle[e]),parseInt(n,j)}function z(e){e>Ee/2&&(Ee=2*e,r("Event throttle increased to "+Ee+"ms"))}function R(e,t){for(var n=t.length,i=0,a=0,u=o(e),c=Ce(),l=0;n>l;l++)(i=t[l].getBoundingClientRect()[e]+x("margin"+u,t[l]))>a&&(a=i);return c=Ce()-c,r("Parsed "+n+" HTML elements"),r("Element position calculated in "+c+"ms"),z(c),a}function L(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function F(e,t){var n=document.querySelectorAll("["+t+"]");return 0===n.length?function(){return a("No tagged elements ("+t+") found on page"),te}():R(e,n)}function P(){return document.querySelectorAll("body *")}function D(e,t,n,o){function i(){return!(e in{init:1,interval:1,size:1})}function a(){return oe in me||Q&&Me in me}function u(){r("No change in size detected")}var c,l;!function(){function e(e,t){return!(Math.abs(e-t)<=ye)}return c=void 0!==n?n:Ae[oe](),l=void 0!==o?o:xe[Me](),e(te,c)||Q&&e(Se,l)}()&&"init"!==e?function(){i()&&a()?B(t):e in{interval:1}||u()}():(H(),function(){te=c,Se=l,V(te,Se,e)}())}function q(e,t,n,o){!function(){return be&&e in Z}()?(function(){e in{reset:1,resetPage:1,init:1}||r("Trigger event: "+t)}(),ze(e,t,n,o)):r("Trigger event cancelled: "+e)}function H(){be||(be=!0,r("Trigger event lock on")),clearTimeout(Te),Te=setTimeout(function(){be=!1,r("Trigger event lock off"),r("--")},_)}function W(e){te=Ae[oe](),Se=xe[Me](),V(te,Se,e)}function B(e){var t=oe;oe=ne,r("Reset trigger event: "+e),H(),W("reset"),oe=t}function V(e,t,n,o,i){!0===ve&&(function(){void 0===i?i=pe:r("Message targetOrigin: "+i)}(),function(){var a=e+":"+t,u=de+":"+a+":"+n+(void 0!==o?":"+o:"");r("Sending message to host page ("+u+")"),he.postMessage(se+u,i)}())}function J(t){function n(){re=t.data,he=t.source,u(),ee=!1,setTimeout(function(){ie=!1},_)}function o(){ie?r("Page reset ignored by init"):(r("Page size reset by host page"),W("resetPage"))}function i(){q("resizeParent","Parent window requested size check")}function c(){var e=s();ae.findTarget(e)}function l(){return t.data.split("]")[1].split(":")[0]}function s(){return t.data.substr(t.data.indexOf(":")+1)}function f(){return"iFrameResize"in e}function d(){var e=s();r("MessageCallback called from parent: "+e),Ne(JSON.parse(e)),r(" --")}function m(){var e=s();r("PageInfoFromParent called from parent: "+e),we(JSON.parse(e)),r(" --")}function g(){return t.data.split(":")[2]in{true:1,false:1}}function v(){switch(l()){case"reset":o();break;case"resize":i();break;case"moveToAnchor":c();break;case"message":d();break;case"pageInfo":m();break;default:f()||g()||a("Unexpected message ("+t.data+")")}}(function(){return se===(""+t.data).substr(0,fe)})()&&function(){!1===ee?v():g()?n():r('Ignored message of type "'+l()+'". Received before initialization.')}()}var U=!0,j=10,K="",X=0,Y="",$=null,G="",Q=!1,Z={resize:1,click:1},_=128,ee=!0,te=1,ne="bodyOffset",oe=ne,ie=!0,re="",ae={},ue=32,ce=null,le=!1,se="[iFrameSizer]",fe=se.length,de="",me={max:1,min:1,bodyScroll:1,documentElementScroll:1},ge="child",ve=!0,he=e.parent,pe="*",ye=0,be=!1,Te=null,Ee=16,Se=1,Oe="scroll",Me=Oe,Ie=e,Ne=function(){a("MessageCallback function not defined")},ke=function(){},we=function(){},Ce=Date.now||function(){return(new Date).getTime()},Ae={bodyOffset:function(){return document.body.offsetHeight+x("marginTop")+x("marginBottom")},offset:function(){return Ae.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,L(Ae))},min:function(){return Math.min.apply(null,L(Ae))},grow:function(){return Ae.max()},lowestElement:function(){return Math.max(Ae.bodyOffset(),R("bottom",P()))},taggedElement:function(){return F("bottom","data-iframe-height")}},xe={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(xe.bodyScroll(),xe.documentElementScroll())},max:function(){return Math.max.apply(null,L(xe))},min:function(){return Math.min.apply(null,L(xe))},rightMostElement:function(){return R("right",P())},taggedElement:function(){return F("right","data-iframe-width")}},ze=function(e){var t,n,o,i=null,r=0,a=function(){r=Ce(),i=null,o=e.apply(t,n),i||(t=n=null)};return function(){var u=Ce();r||(r=u);var c=Ee-(u-r);return t=this,n=arguments,0>=c||c>Ee?(i&&(clearTimeout(i),i=null),r=u,o=e.apply(t,n),i||(t=n=null)):i||(i=setTimeout(a,c)),o}}(D);t(e,"message",J),function(){"loading"!==document.readyState&&e.parent.postMessage("[iFrameResizerChild]Ready","*")}()}(window||{});